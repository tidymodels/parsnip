<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Boosted trees via xgboost — details_boost_tree_xgboost • parsnip</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Boosted trees via xgboost — details_boost_tree_xgboost"><meta name="description" content="xgboost::xgb.train() creates a series of decision trees forming an
ensemble. Each tree depends on the results of previous trees. All trees in
the ensemble are combined to produce a final prediction."><meta property="og:description" content="xgboost::xgb.train() creates a series of decision trees forming an
ensemble. Each tree depends on the results of previous trees. All trees in
the ensemble are combined to produce a final prediction."><meta property="og:image" content="https://parsnip.tidymodels.org/logo.png"><meta name="robots" content="noindex"><script defer data-domain="parsnip.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">parsnip</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.3.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/parsnip.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/checklists.html">Dev checklists</a></li>
    <li><a class="dropdown-item" href="../articles/Examples.html">Fitting and predicting with parsnip</a></li>
    <li><a class="dropdown-item" href="../articles/Submodels.html">Evaluating submodels with the same model object</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-learn-more" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Learn more</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-learn-more"><li><a class="external-link dropdown-item" href="https://www.tidymodels.org/learn/models/parsnip-ranger-glmnet/">Regression modeling</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidymodels.org/learn/models/parsnip-nnet/">Classification modeling</a></li>
    <li><a class="external-link dropdown-item" href="https://www.tidymodels.org/learn/develop/models/">Making a parsnip model from scratch</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/tidymodels/parsnip/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Boosted trees via xgboost</h1>
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/parsnip/blob/main/R/boost_tree_xgboost.R" class="external-link"><code>R/boost_tree_xgboost.R</code></a></small>
      <div class="d-none name"><code>details_boost_tree_xgboost.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html" class="external-link">xgboost::xgb.train()</a></code> creates a series of decision trees forming an
ensemble. Each tree depends on the results of previous trees. All trees in
the ensemble are combined to produce a final prediction.</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For this engine, there are multiple modes: classification and regression</p><div class="section">
<h3 id="tuning-parameters">Tuning Parameters<a class="anchor" aria-label="anchor" href="#tuning-parameters"></a></h3>


<p>This model has 8 tuning parameters:</p><ul><li><p><code>tree_depth</code>: Tree Depth (type: integer, default: 6L)</p></li>
<li><p><code>trees</code>: # Trees (type: integer, default: 15L)</p></li>
<li><p><code>learn_rate</code>: Learning Rate (type: double, default: 0.3)</p></li>
<li><p><code>mtry</code>: # Randomly Selected Predictors (type: integer, default: see
below)</p></li>
<li><p><code>min_n</code>: Minimal Node Size (type: integer, default: 1L)</p></li>
<li><p><code>loss_reduction</code>: Minimum Loss Reduction (type: double, default: 0.0)</p></li>
<li><p><code>sample_size</code>: Proportion Observations Sampled (type: double, default:
1.0)</p></li>
<li><p><code>stop_iter</code>: # Iterations Before Stopping (type: integer, default:
Inf)</p></li>
</ul><p>For <code>mtry</code>, the default value of <code>NULL</code> translates to using all
available columns.</p>
</div>

<div class="section">
<h3 id="translation-from-parsnip-to-the-original-package-regression-">Translation from parsnip to the original package (regression)<a class="anchor" aria-label="anchor" href="#translation-from-parsnip-to-the-original-package-regression-"></a></h3>


<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span>  mtry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, trees <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, min_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, tree_depth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  learn_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>, loss_reduction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>, sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  stop_iter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_args.html">set_mode</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/translate.html">translate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## Boosted Tree Model Specification (regression)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## Main Arguments:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##   mtry = integer()</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##   trees = integer()</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##   min_n = integer()</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="do">##   tree_depth = integer()</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="do">##   learn_rate = numeric()</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="do">##   loss_reduction = numeric()</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="do">##   sample_size = numeric()</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="do">##   stop_iter = integer()</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="do">## Computational engine: xgboost</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="do">## Model fit template:</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="do">## parsnip::xgb_train(x = missing_arg(), y = missing_arg(), weights = missing_arg(),</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="do">##     colsample_bynode = integer(), nrounds = integer(), min_child_weight = integer(),</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="do">##     max_depth = integer(), eta = numeric(), gamma = numeric(),</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="do">##     subsample = numeric(), early_stop = integer(), nthread = 1,</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="do">##     verbose = 0)</span></span></code></pre><p></p></div>
</div>

<div class="section">
<h3 id="translation-from-parsnip-to-the-original-package-classification-">Translation from parsnip to the original package (classification)<a class="anchor" aria-label="anchor" href="#translation-from-parsnip-to-the-original-package-classification-"></a></h3>


<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/boost_tree.html">boost_tree</a></span><span class="op">(</span></span>
<span>  mtry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, trees <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, min_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>, tree_depth <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  learn_rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>, loss_reduction <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>, sample_size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">numeric</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  stop_iter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">integer</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_args.html">set_mode</a></span><span class="op">(</span><span class="st">"classification"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/translate.html">translate</a></span><span class="op">(</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## Boosted Tree Model Specification (classification)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## Main Arguments:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##   mtry = integer()</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##   trees = integer()</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">##   min_n = integer()</span></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="do">##   tree_depth = integer()</span></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="do">##   learn_rate = numeric()</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="do">##   loss_reduction = numeric()</span></span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="do">##   sample_size = numeric()</span></span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a><span class="do">##   stop_iter = integer()</span></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="do">## Computational engine: xgboost</span></span>
<span id="cb1-14"><a href="#cb1-14" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-15"><a href="#cb1-15" tabindex="-1"></a><span class="do">## Model fit template:</span></span>
<span id="cb1-16"><a href="#cb1-16" tabindex="-1"></a><span class="do">## parsnip::xgb_train(x = missing_arg(), y = missing_arg(), weights = missing_arg(),</span></span>
<span id="cb1-17"><a href="#cb1-17" tabindex="-1"></a><span class="do">##     colsample_bynode = integer(), nrounds = integer(), min_child_weight = integer(),</span></span>
<span id="cb1-18"><a href="#cb1-18" tabindex="-1"></a><span class="do">##     max_depth = integer(), eta = numeric(), gamma = numeric(),</span></span>
<span id="cb1-19"><a href="#cb1-19" tabindex="-1"></a><span class="do">##     subsample = numeric(), early_stop = integer(), nthread = 1,</span></span>
<span id="cb1-20"><a href="#cb1-20" tabindex="-1"></a><span class="do">##     verbose = 0)</span></span></code></pre><p></p></div>
<p><code><a href="xgb_train.html">xgb_train()</a></code> is a wrapper around
<code><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html" class="external-link">xgboost::xgb.train()</a></code> (and other functions)
that makes it easier to run this model.</p>
</div>

<div class="section">
<h3 id="preprocessing-requirements">Preprocessing requirements<a class="anchor" aria-label="anchor" href="#preprocessing-requirements"></a></h3>


<p>xgboost does not have a means to translate factor predictors to grouped
splits. Factor/categorical predictors need to be converted to numeric
values (e.g., dummy or indicator variables) for this engine. When using
the formula method via <code><a href="fit.html">fit.model_spec()</a></code>, parsnip
will convert factor columns to indicators using a one-hot encoding.</p>
<p>For classification, non-numeric outcomes (i.e., factors) are internally
converted to numeric. For binary classification, the <code>event_level</code>
argument of <code><a href="set_engine.html">set_engine()</a></code> can be set to either <code>"first"</code> or <code>"second"</code>
to specify which level should be used as the event. This can be helpful
when a watchlist is used to monitor performance from with the xgboost
training process.</p>
</div>

<div class="section">
<h3 id="case-weights">Case weights<a class="anchor" aria-label="anchor" href="#case-weights"></a></h3>


<p>This model can utilize case weights during model fitting. To use them,
see the documentation in <a href="case_weights.html">case_weights</a> and the examples
on <code>tidymodels.org</code>.</p>
<p>The <code><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit()</a></code> and <code><a href="https://generics.r-lib.org/reference/fit_xy.html" class="external-link">fit_xy()</a></code> arguments have arguments called
<code>case_weights</code> that expect vectors of case weights.</p>
</div>

<div class="section">
<h3 id="sparse-data">Sparse Data<a class="anchor" aria-label="anchor" href="#sparse-data"></a></h3>


<p>This model can utilize sparse data during model fitting and prediction.
Both sparse matrices such as dgCMatrix from the <code>Matrix</code> package and
sparse tibbles from the <code>sparsevctrs</code> package are supported. See
<a href="sparse_data.html">sparse_data</a> for more information.</p>
</div>

<div class="section">
<h3 id="other-details">Other details<a class="anchor" aria-label="anchor" href="#other-details"></a></h3>

<div class="section">
<h4 id="interfacing-with-the-params-argument">Interfacing with the <code>params</code> argument<a class="anchor" aria-label="anchor" href="#interfacing-with-the-params-argument"></a></h4>


<p>The xgboost function that parsnip indirectly wraps,
<code><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html" class="external-link">xgboost::xgb.train()</a></code>, takes most arguments via
the <code>params</code> list argument. To supply engine-specific arguments that are
documented in <code><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html" class="external-link">xgboost::xgb.train()</a></code> as
arguments to be passed via <code>params</code>, supply the list elements directly
as named arguments to <code><a href="set_engine.html">set_engine()</a></code> rather than as
elements in <code>params</code>. For example, pass a non-default evaluation metric
like this:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># good</span></span>
<span><span class="fu"><a href="../reference/boost_tree.html">boost_tree</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span>, eval_metric <span class="op">=</span> <span class="st">"mae"</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## Boosted Tree Model Specification (unknown mode)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## Engine-Specific Arguments:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##   eval_metric = mae</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## Computational engine: xgboost</span></span></code></pre><p></p></div>
<p>…rather than this:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="co"># bad</span></span>
<span><span class="fu"><a href="../reference/boost_tree.html">boost_tree</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/set_engine.html">set_engine</a></span><span class="op">(</span><span class="st">"xgboost"</span>, params <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>eval_metric <span class="op">=</span> <span class="st">"mae"</span><span class="op">)</span><span class="op">)</span></span></code></pre><p></p></div>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="do">## Boosted Tree Model Specification (unknown mode)</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="do">## Engine-Specific Arguments:</span></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="do">##   params = list(eval_metric = "mae")</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="do">##</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="do">## Computational engine: xgboost</span></span></code></pre><p></p></div>
<p>parsnip will then route arguments as needed. In the case that arguments
are passed to <code>params</code> via <code><a href="set_engine.html">set_engine()</a></code>, parsnip will
warn and re-route the arguments as needed. Note, though, that arguments
passed to <code>params</code> cannot be tuned.</p>
</div>

<div class="section">
<h4 id="sparse-matrices">Sparse matrices<a class="anchor" aria-label="anchor" href="#sparse-matrices"></a></h4>


<p>xgboost requires the data to be in a sparse format. If your predictor
data are already in this format, then use
<code><a href="fit.html">fit_xy.model_spec()</a></code> to pass it to the model
function. Otherwise, parsnip converts the data to this format.</p>
</div>

<div class="section">
<h4 id="parallel-processing">Parallel processing<a class="anchor" aria-label="anchor" href="#parallel-processing"></a></h4>


<p>By default, the model is trained without parallel processing. This can
be change by passing the <code>nthread</code> parameter to
<code><a href="set_engine.html">set_engine()</a></code>. However, it is unwise to combine this
with external parallel processing when using the package.</p>
</div>

<div class="section">
<h4 id="interpreting-mtry">Interpreting <code>mtry</code><a class="anchor" aria-label="anchor" href="#interpreting-mtry"></a></h4>


<p>The <code>mtry</code> argument denotes the number of predictors that will be
randomly sampled at each split when creating tree models.</p>
<p>Some engines, such as <code>"xgboost"</code>, <code>"xrf"</code>, and <code>"lightgbm"</code>, interpret
their analogue to the <code>mtry</code> argument as the <em>proportion</em> of predictors
that will be randomly sampled at each split rather than the <em>count</em>. In
some settings, such as when tuning over preprocessors that influence the
number of predictors, this parameterization is quite
helpful—interpreting <code>mtry</code> as a proportion means that <code>[0, 1]</code> is
always a valid range for that parameter, regardless of input data.</p>
<p>parsnip and its extensions accommodate this parameterization using the
<code>counts</code> argument: a logical indicating whether <code>mtry</code> should be
interpreted as the number of predictors that will be randomly sampled at
each split. <code>TRUE</code> indicates that <code>mtry</code> will be interpreted in its
sense as a count, <code>FALSE</code> indicates that the argument will be
interpreted in its sense as a proportion.</p>
<p><code>mtry</code> is a main model argument for
<code><a href="boost_tree.html">boost_tree()</a></code> and
<code><a href="rand_forest.html">rand_forest()</a></code>, and thus should not have an
engine-specific interface. So, regardless of engine, <code>counts</code> defaults
to <code>TRUE</code>. For engines that support the proportion interpretation
(currently <code>"xgboost"</code> and <code>"xrf"</code>, via the rules package, and
<code>"lightgbm"</code> via the bonsai package) the user can pass the
<code>counts = FALSE</code> argument to <code><a href="set_engine.html">set_engine()</a></code> to supply <code>mtry</code> values
within <code>[0, 1]</code>.</p>
</div>

<div class="section">
<h4 id="early-stopping">Early stopping<a class="anchor" aria-label="anchor" href="#early-stopping"></a></h4>


<p>The <code>stop_iter()</code> argument allows the model to prematurely stop training
if the objective function does not improve within <code>early_stop</code>
iterations.</p>
<p>The best way to use this feature is in conjunction with an <em>internal
validation set</em>. To do this, pass the <code>validation</code> parameter of
<code><a href="xgb_train.html">xgb_train()</a></code> via the parsnip
<code><a href="set_engine.html">set_engine()</a></code> function. This is the
proportion of the training set that should be reserved for measuring
performance (and stopping early).</p>
<p>If the model specification has <code>early_stop &gt;= trees</code>, <code>early_stop</code> is
converted to <code>trees - 1</code> and a warning is issued.</p>
<p>Note that, since the <code>validation</code> argument provides an alternative
interface to <code>watchlist</code>, the <code>watchlist</code> argument is guarded by parsnip
and will be ignored (with a warning) if passed.</p>
</div>

<div class="section">
<h4 id="objective-function">Objective function<a class="anchor" aria-label="anchor" href="#objective-function"></a></h4>


<p>parsnip chooses the objective function based on the characteristics of
the outcome. To use a different loss, pass the <code>objective</code> argument to
<code><a href="set_engine.html">set_engine()</a></code> directly.</p>
</div>


</div>

<div class="section">
<h3 id="saving-fitted-model-objects">Saving fitted model objects<a class="anchor" aria-label="anchor" href="#saving-fitted-model-objects"></a></h3>


<p>This model object contains data that are not required to make
predictions. When saving the model for the purpose of prediction, the
size of the saved object might be substantially reduced by using
functions from the <a href="https://butcher.tidymodels.org" class="external-link">butcher</a> package.</p>
<p>Models fitted with this engine may require native serialization methods
to be properly saved and/or passed between R sessions. To learn more
about preparing fitted models for serialization, see the bundle package.</p>
</div>

<div class="section">
<h3 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h3>


<p>The “Fitting and Predicting with parsnip” article contains
<a href="https://parsnip.tidymodels.org/articles/articles/Examples.html#boost-tree-xgboost">examples</a>
for <code><a href="boost_tree.html">boost_tree()</a></code> with the <code>"xgboost"</code> engine.</p>
</div>

<div class="section">
<h3 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h3>

<ul><li><p><a href="https://arxiv.org/abs/1603.02754" class="external-link">XGBoost: A Scalable Tree Boosting System</a></p></li>
<li><p>Kuhn, M, and K Johnson. 2013. <em>Applied Predictive Modeling</em>. Springer.</p></li>
</ul></div>

    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

  </div></footer></body></html>

